import"../chunks/NZTpNUN0.js";import{af as C,K as D,L as E,W as L,X as g,O as j,P as O,ah as v,U as d,d as t,Q as m,ag as U,R as r,V as c,aj as I}from"../chunks/CFKvo57Q.js";import{i as x}from"../chunks/DFAa2miK.js";import{s as K,b as y,c as M}from"../chunks/D4j3vVcC.js";import{b as N}from"../chunks/DWI5VLZK.js";function Q(P,a,s,l,n){t(a)&&s.data.selectedProject&&(r(l,!1),r(n,!1),t(a).src=s.data.selectedProject.demoLink)}var V=L('<div class="loading-container svelte-cb523u"><div class="loading-spinner svelte-cb523u"></div> <p class="loading-text svelte-cb523u">Chargement du projet...</p> <p class="loading-subtext svelte-cb523u"> </p></div>'),X=L(`<div class="error-container svelte-cb523u"><h2 class="svelte-cb523u">Erreur de chargement</h2> <p class="svelte-cb523u">Le projet n'a pas pu être chargé. Cela peut être dû à:</p> <ul class="svelte-cb523u"><li class="svelte-cb523u">Une connexion internet instable</li> <li class="svelte-cb523u">Le projet est temporairement indisponible</li> <li class="svelte-cb523u">Des restrictions de sécurité du navigateur</li></ul> <div class="error-actions svelte-cb523u"><button class="retry-button svelte-cb523u">Réessayer</button> <a target="_blank" class="external-link svelte-cb523u">Ouvrir dans un nouvel onglet</a></div></div>`),q=L('<div class="demo-container svelte-cb523u"><!> <!> <div><iframe allow="fullscreen" class="svelte-cb523u"></iframe></div></div>');function S(P,a){D(a,!0);let s=m(null),l=m(!1),n=m(!1),f=m(!1);E(()=>{r(f,window.innerWidth<=768);const e=()=>{r(f,window.innerWidth<=768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)}),E(()=>{if(!t(s)||!a.data.selectedProject)return;r(l,!1),r(n,!1);const e=()=>{r(l,!0),r(n,!1)},i=()=>{r(l,!1),r(n,!0)};return t(s).addEventListener("load",e),t(s).addEventListener("error",i),t(s).src=a.data.selectedProject.demoLink,t(s).className=`demo-iframe ${a.data.selectedProject.slug}`,()=>{t(s)?.removeEventListener("load",e),t(s)?.removeEventListener("error",i)}});let z=U(()=>a.data.selectedProject?t(f)?a.data.selectedProject.iframeHeight.mobile:a.data.selectedProject.iframeHeight.desktop:600);var b=q(),p=d(b);{var H=e=>{var i=V(),o=v(d(i),4),u=d(o);c(o),c(i),g(()=>I(u,`Initialisation de ${a.data.selectedProject.name??""}`)),j(e,i)};x(p,e=>{!t(l)&&!t(n)&&e(H)})}var k=v(p,2);{var R=e=>{var i=X(),o=v(d(i),6),u=d(o);u.__click=[Q,s,a,l,n];var W=v(u,2);c(o),c(i),g(()=>y(W,"href",a.data.selectedProject.demoLink)),j(e,i)};x(k,e=>{t(n)&&e(R)})}var _=v(k,2);let w;var h=d(_);N(h,e=>r(s,e),()=>t(s)),c(_),c(b),g(e=>{w=K(_,1,"iframe-container svelte-cb523u",null,w,e),y(h,"title",`Démo de ${a.data.selectedProject.name}`),M(h,`height: ${t(z)??""}px; opacity: ${t(l)?1:0};`)},[()=>({loaded:t(l)})]),j(P,b),O()}C(["click"]);export{S as component};
