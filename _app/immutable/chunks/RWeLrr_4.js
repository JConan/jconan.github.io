const f="fr",p=["fr","en"],w="PARAGLIDE_LOCALE";const L=["url","cookie","baseLocale"];globalThis.__paraglide={};let h=!1,u=()=>{let e;for(const o of L)if(o==="cookie"?e=x():o==="baseLocale"?e=f:o==="url"&&typeof window<"u"?e=y(window.location.href):U(o)&&i.has(o)&&(e=i.get(o).getLocale()),e!==void 0){const t=k(e);return h||(h=!0,b(t,{reload:!1})),t}throw new Error("No locale found. Read the docs https://inlang.com/m/gerre34r/library-inlang-paraglideJs/errors#no-locale-found")},b=(e,o)=>{const t={reload:!0,...o};let a;try{a=u()}catch{}let r;for(const n of L)if(n==="cookie"){if(typeof document>"u"||typeof window>"u")continue;const c=window.location.hostname;document.cookie=`${w}=${e}; path=/; max-age=34560000; domain=${c}`}else{if(n==="baseLocale")continue;n==="url"&&typeof window<"u"?r=s(window.location.href,{locale:e}).href:U(n)&&i.has(n)&&i.get(n).setLocale(e)}t.reload&&window.location&&e!==a&&(r?window.location.href=r:window.location.reload())},d=()=>typeof window<"u"?window.location.origin:"http://fallback.com";function l(e){return e?p.includes(e):!1}function k(e){if(l(e)===!1)throw new Error(`Invalid locale: ${e}. Expected one of: ${p.join(", ")}`);return e}function x(){if(typeof document>"u"||!document.cookie)return;const o=document.cookie.match(new RegExp(`(^| )${w}=([^;]+)`))?.[2];if(l(o))return o}let g,m;function y(e){const o=typeof e=="string"?e:e.href;if(g===o)return m;let t;return t=z(e),g=o,m=t,t}function z(e){const t=new URL(e,"http://dummy.com").pathname.split("/").filter(Boolean);if(t.length>0){const a=t[0];if(l(a))return a}return f}function s(e,o){return R(e,o)}function R(e,o){const t=typeof e=="string"?new URL(e,d()):new URL(e),a=o?.locale??u();if(y(t)===a)return t;const n=t.pathname.split("/").filter(Boolean);return n.length>0&&l(n[0])&&n.shift(),a===f?t.pathname="/"+n.join("/"):t.pathname="/"+a+"/"+n.join("/"),t}function $(e){return j(e)}function j(e){const o=typeof e=="string"?new URL(e,d()):new URL(e),t=o.pathname.split("/").filter(Boolean);return t.length>0&&l(t[0])&&(o.pathname="/"+t.slice(1).join("/")),o}function E(e,o){const t=u(),a=o?.locale??t,r=new URL(e,d()),n=s(r,{locale:a});return e.startsWith("/")&&r.origin===n.origin?a!==t&&s(r,{locale:t}).origin!==n.origin?n.href:n.pathname+n.search+n.hash:n.href}const i=new Map;function U(e){return typeof e=="string"&&/^custom-[A-Za-z0-9]+$/.test(e)}export{E as a,$ as d,y as e,u as g,p as l,b as s};
